/*
 * Tables.h
 *
 * Created: 21.08.2020 0:45:07
 *  Author: Павел
 */

#pragma once

typedef uint32_t precise_high_t;
typedef uint16_t precise_low_t;
typedef uint16_t decel_high_t;
typedef uint8_t decel_low_t;

#include "ProgmemLate.h"
#include "MyFunctions.h"

#define PRECISE_DECELERATION_LIMIT 1024u

PROGMEM_LATE const precise_high_t precise_deceleration_table_high[] = {
	209629, 205185, 200861, 196651, 192549, 188549, 184647, 180838, \
	177118, 173482, 169927, 166449, 163045, 159712, 156447, 153247, \
	150110, 147034, 144016, 141054, 138145, 135288, 132481, 129723, \
	127012, 124346, 121724, 119144, 116605, 114105, 111644, 109220, \
	106832, 104480, 102162, 99877, 97624, 95402, 93211, 91049, 88916, \
	86811, 84734, 82683, 80658, 78658, 76683, 74732, 72805, 70901, 69019, \
	67159
};

PROGMEM_LATE const precise_low_t precise_deceleration_table_low[] = {
	65320, 63502, 61705, 59928, 58170, 56431, 54711, 53009, 51325, \
	50980, 49968, 49659, 49331, 48336, 48043, 47731, 46752, 46475, 46178, \
	45214, 44952, 44669, 43719, 43471, 43202, 42265, 42030, 41774, 40850, \
	40627, 40383, 39471, 39260, 39028, 38127, 37927, 37706, 36816, 36627, \
	36416, 35536, 35358, 35157, 34286, 34118, 33927, 33065, 32906, 32724, \
	31871, 31721, 31548, 30704, 30562, 30397, 29562, 29428, 29271, 28444, \
	28317, 28168, 27349, 27229, 27087, 26276, 26163, 26028, 25224, 25118, \
	24990, 24192, 24093, 23971, 23180, 23087, 22971, 22775, 22667, 22289, \
	22187, 22100, 21990, 21800, 21698, 21326, 21229, 21148, 21044, 20859, \
	20763, 20396, 20305, 20229, 20130, 19950, 19860, 19498, 19412, 19341, \
	19247, 19071, 18986, 18629, 18548, 18481, 18392, 18220, 18140, 17787, \
	17711, 17648, 17563, 17396, 17320, 16971, 16899, 16840, 16759, 16596, \
	16524, 16179, 16111, 16056, 15979, 15820, 15752, 15410, 15346, 15295, \
	15221, 15066, 15001, 14663, 14602, 14555, 14484, 14333, 14271, 13936, \
	13879, 13835, 13767, 13730, 13695, 13658, 13619, 13560, 13229, 13175, \
	13134, 13069, 13035, 13003, 12969, 12933, 12877, 12549, 12498, 12459, \
	12397, 12366, 12337, 12306, 12272, 12219, 11894, 11845, 11809, 11750, \
	11721, 11695, 11666, 11635, 11585, 11262, 11216, 11182, 11125, 11099, \
	11075, 11049, 11020, 10972, 10652, 10608, 10576, 10522, 10498, 10476, \
	10452, 10426, 10380, 10062, 10020, 9990, 9939, 9917, 9897, 9875, \
	9851, 9807, 9491, 9451, 9423, 9374, 9354, 9336, 9316, 9294, 9252, \
	9151, 9134, 8977, 8958, 8938, 8900, 8874, 8827, 8808, 8792, 8774, \
	8754, 8714, 8615, 8599, 8444, 8427, 8409, 8372, 8348, 8303, 8286, \
	8271, 8255, 8237, 8198, 8101, 8087, 7933, 7918, 7902, 7866, 7844, \
	7800, 7785, 7771, 7757, 7741, 7703, 7608, 7595, 7443, 7429, 7415, \
	7380, 7360, 7317, 7304, 7291, 7278, 7264, 7227, 7134, 7122, 6972, \
	6959, 6946, 6913, 6894, 6852, 6841, 6829, 6817, 6805, 6769, 6677, \
	6667, 6658, 6587, 6574, 6566, 6553, 6518, 6506, 6495, 6463, 6445, \
	6404, 6395, 6384, 6373, 6362, 6328, 6237, 6228, 6220, 6150, 6139, \
	6132, 6120, 6086, 6075, 6065, 6035, 6018, 5978, 5970, 5960, 5950, \
	5940, 5907, 5818, 5810, 5803, 5734, 5724, 5718, 5707, 5674, 5664, \
	5655, 5626, 5610, 5571, 5564, 5555, 5546, 5537, 5505, 5417, 5410, \
	5404, 5336, 5327, 5322, 5312, 5280, 5271, 5263, 5235, 5220, 5182, \
	5176, 5168, 5160, 5152, 5121, 5080, 5071, 5065, 5051, 5043, 5034, \
	5028, 5023, 4956, 4947, 4943, 4934, 4903, 4895, 4888, 4861, 4847, \
	4810, 4804, 4797, 4790, 4783, 4753, 4713, 4705, 4699, 4686, 4679, \
	4671, 4666, 4662, 4595, 4587, 4584, 4576, 4546, 4538, 4532, 4506, \
	4493, 4457, 4451, 4445, 4439, 4433, 4403, 4364, 4357, 4352, 4339, \
	4333, 4326, 4322, 4318, 4252, 4245, 4243, 4235, 4206, 4199, 4194, \
	4168, 4156, 4121, 4115, 4110, 4105, 4099, 4096, 4086, 4084, 4080, \
	4079, 4070, 4032, 4026, 4021, 4009, 4004, 3997, 3994, 3991, 3925, \
	3919, 3918, 3910, 3882, 3876, 3871, 3846, 3835, 3800, 3795, 3790, \
	3786, 3781, 3778, 3769, 3768, 3764, 3764, 3756, 3718, 3713, 3708, \
	3697, 3693, 3686, 3684, 3681, 3616, 3611, 3610, 3603, 3575, 3570, \
	3566, 3541, 3531, 3496, 3492, 3487, 3484, 3480, 3477, 3469, 3468, \
	3465, 3465, 3458, 3421, 3416, 3412, 3401, 3398, 3391, 3390, 3387, \
	3383, 3353, 3337, 3333, 3329, 3325, 3323, 3318, 3318, 3312, 3284, \
	3280, 3276, 3252, 3242, 3208, 3204, 3200, 3197, 3194, 3191, 3184, \
	3183, 3181, 3181, 3175, 3138, 3134, 3130, 3120, 3117, 3111, 3110, \
	3108, 3104, 3075, 3059, 3056, 3052, 3049, 3047, 3043, 3043, 3038, \
	3010, 3007, 3003, 2979, 2970, 2936, 2933, 2929, 2927, 2924, 2922, \
	2915, 2915, 2913, 2913, 2908, 2871, 2868, 2864, 2855, 2852, 2847, \
	2846, 2844, 2841, 2838, 2828, 2824, 2823, 2818, 2814, 2812, 2797, \
	2794, 2791, 2788, 2786, 2783, 2783, 2779, 2751, 2749, 2745, 2721, \
	2713, 2679, 2677, 2673, 2671, 2669, 2667, 2661, 2661, 2660, 2660, \
	2655, 2619, 2616, 2613, 2604, 2601, 2597, 2596, 2594, 2592, 2589, \
	2580, 2576, 2575, 2571, 2567, 2566, 2551, 2548, 2546, 2543, 2541, \
	2539, 2539, 2536, 2508, 2506, 2503, 2479, 2471, 2438, 2436, 2433, \
	2431, 2429, 2428, 2422, 2422, 2422, 2422, 2417, 2414, 2412, 2409, \
	2408, 2406, 2404, 2390, 2382, 2379, 2376, 2368, 2365, 2362, 2361, \
	2359, 2358, 2355, 2346, 2343, 2342, 2338, 2335, 2334, 2319, 2317, \
	2315, 2312, 2311, 2309, 2309, 2307, 2279, 2277, 2275, 2251, 2243, \
	2211, 2209, 2206, 2205, 2203, 2202, 2197, 2197, 2197, 2197, 2193, \
	2190, 2188, 2186, 2185, 2183, 2182, 2168, 2160, 2158, 2155, 2147, \
	2145, 2142, 2141, 2139, 2139, 2136, 2127, 2125, 2124, 2120, 2118, \
	2117, 2117, 2114, 2113, 2112, 2106, 2105, 2102, 2102, 2100, 2099, \
	2096, 2095, 2094, 2094, 2092, 2064, 2063, 2061, 2037, 2030, 1998, \
	1996, 1993, 1993, 1991, 1990, 1986, 1986, 1986, 1986, 1983, 1980, \
	1978, 1977, 1976, 1974, 1973, 1960, 1952, 1950, 1947, 1940, 1938, \
	1935, 1935, 1933, 1933, 1930, 1922, 1920, 1919, 1915, 1914, 1913, \
	1913, 1910, 1910, 1909, 1903, 1902, 1900, 1900, 1898, 1897, 1895, \
	1894, 1893, 1893, 1892, 1864, 1863, 1861, 1860, 1858, 1857, 1846, \
	1844, 1844, 1842, 1838, 1831, 1799, 1797, 1795, 1795, 1793, 1792, \
	1789, 1789, 1789, 1789, 1787, 1784, 1782, 1781, 1781, 1779, 1778, \
	1765, 1758, 1756, 1753, 1746, 1745, 1742, 1742, 1740, 1740, 1738, \
	1730, 1728, 1727, 1724, 1723, 1722, 1722, 1720, 1720, 1719, 1713, \
	1712, 1711, 1711, 1709, 1708, 1707, 1706, 1705, 1705, 1704, 1677, \
	1676, 1674, 1673, 1672, 1671, 1660, 1658, 1658, 1657, 1653, 1646, \
	1645, 1644, 1642, 1642, 1623, 1620, 1616, 1614, 1613, 1611, 1611, \
	1609, 1608, 1606, 1606, 1606, 1606, 1604, 1602, 1600, 1599, 1599, \
	1597, 1597, 1584, 1577, 1575, 1573, 1566, 1565, 1562, 1562, 1561, \
	1561, 1559, 1551, 1549, 1549, 1546, 1545, 1544, 1544, 1543, 1543, \
	1542, 1536, 1535, 1535, 1535, 1533, 1532, 1531, 1530, 1530, 1530, \
	1529, 1502, 1501, 1500, 1499, 1498, 1497, 1486, 1485, 1485, 1484, \
	1480, 1473, 1473, 1472, 1470, 1470, 1469, 1463, 1463, 1462, 1461, \
	1461, 1460, 1452, 1451, 1448, 1445, 1443, 1442, 1440, 1440, 1439, \
	1438, 1436, 1436, 1436, 1436, 1435, 1433, 1431, 1430, 1430, 1429, \
	1429, 1416, 1409, 1407, 1405, 1399, 1398, 1395, 1395, 1394, 1394, \
	1393, 1385, 1383, 1383, 1380, 1380, 1379, 1379, 1378, 1378, 1377, \
	1372, 1371, 1371, 1371, 1369, 1368, 1368, 1367, 1367, 1367, 1366, \
	1339, 1339, 1338, 1337
};

PROGMEM_LATE const decel_high_t deceleration_table_high[] = {
	1269, 1166, 1071, 1000, 933, 867, 818, \
	768, 720, 681, 649, 615, 586, 559, 530, 505, 484, 467, 446, 426, 411, \
	395, 382, 367, 357, 342, 331, 321, 311, 298, 290, 282, 274, 266, 259
};

PROGMEM_LATE const decel_low_t deceleration_table_low[] = {
	252, 245, 236, 232, 226, 222, 215, 210, 205, 199, 195, 191, 187, 182, \
	180, 176, 173, 168, 164, 159, 159, 153, 152, 149, 145, 144, 142, 138, \
	137, 133, 129, 128, 125, 125, 122, 119, 119, 116, 113, 112, 112, 111, \
	108, 106, 104, 103, 99, 99, 98, 96, 96, 94, 92, 91, 91, 90, 88, 85, \
	85, 85, 85, 84, 81, 80, 80, 78, 78, 74, 74, 74, 73, 72, 72, 71, 70, \
	69, 68, 68, 68, 67, 65, 64, 63, 63, 63, 63, 63, 62, 61, 60, 59, 59, \
	57, 57, 57, 54, 54, 54, 54, 54, 52, 52, 52, 52, 51, 51, 50, 49, 49, \
	49, 49, 48, 48, 47, 47, 46, 45, 45, 45, 45, 45, 45, 45, 45, 44, 43, \
	43, 42, 42, 40, 40, 40, 40, 40, 38, 38, 38, 38, 38, 38, 36, 36, 36, \
	36, 36, 36, 36, 36, 35, 35, 34, 34, 34, 34, 34, 34, 33, 33, 33, 32, \
	32, 32, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 30, 29, \
	29, 29, 29, 29, 28, 27, 27, 27, 27, 27, 27, 27, 25, 25, 25, 25, 25, \
	25, 25, 25, 25, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 23, \
	23, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 21, 21, \
	21, 21, 21, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, \
	20, 20, 20, 20, 20, 19, 19, 19, 19, 19, 19, 19, 19, 19, 18, 17, 17, \
	17, 17, 17, 17, 17, 17, 17, 17, 17, 15, 15, 15, 15, 15, 15, 15, 15, \
	15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, \
	15, 15, 15, 15, 15, 15, 15, 14, 14, 13, 13, 13, 13, 13, 13, 13, 13, \
	13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, \
	13, 13, 13, 13, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, \
	12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, \
	12, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 10, 10, \
	10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 8, 8, \
	8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, \
	8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, \
	8, 8, 8, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, \
	7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, \
	7, 7, 7, 7, 7, 7, 7, 7, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, \
	6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, \
	6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, \
	6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, \
	5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, \
	3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, \
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0
};

//Maps 0xFFFF TIMER1 speed points, downscaled to 0x3FF (at the expense of resolution) into 0xFFFF acceleration values
PROGMEM_LATE const uint16_t acceleration_table[] = {
	1, 3, 6, 9, 13, 18, 23, 28, 34, 40, 47, 54, 61, 68, 76, 84, 93, 101, \
	110, 119, 128, 138, 148, 158, 168, 179, 189, 200, 211, 222, 234, 245, \
	257, 269, 282, 294, 307, 319, 332, 345, 358, 372, 385, 399, 413, 427, \
	441, 456, 470, 485, 500, 515, 530, 545, 561, 576, 592, 608, 624, 640, \
	656, 672, 689, 706, 722, 739, 756, 773, 791, 808, 826, 843, 861, 879, \
	897, 915, 934, 952, 971, 989, 1008, 1027, 1046, 1065, 1084, 1104, \
	1123, 1143, 1162, 1182, 1202, 1222, 1242, 1262, 1283, 1303, 1324, \
	1345, 1365, 1386, 1407, 1428, 1450, 1471, 1492, 1514, 1535, 1557, \
	1579, 1601, 1623, 1645, 1667, 1690, 1712, 1734, 1757, 1780, 1803, \
	1825, 1848, 1872, 1895, 1918, 1941, 1965, 1989, 2012, 2036, 2060, \
	2084, 2108, 2132, 2156, 2180, 2205, 2229, 2254, 2279, 2303, 2328, \
	2353, 2378, 2403, 2428, 2454, 2479, 2505, 2530, 2556, 2582, 2607, \
	2633, 2659, 2685, 2711, 2738, 2764, 2790, 2817, 2843, 2870, 2897, \
	2924, 2951, 2978, 3005, 3032, 3059, 3086, 3114, 3141, 3169, 3196, \
	3224, 3252, 3280, 3308, 3336, 3364, 3392, 3420, 3449, 3477, 3505, \
	3534, 3563, 3591, 3620, 3649, 3678, 3707, 3736, 3765, 3795, 3824, \
	3853, 3883, 3912, 3942, 3972, 4002, 4031, 4061, 4091, 4122, 4152, \
	4182, 4212, 4243, 4273, 4304, 4334, 4365, 4396, 4426, 4457, 4488, \
	4519, 4550, 4581, 4613, 4644, 4675, 4707, 4738, 4770, 4802, 4833, \
	4865, 4897, 4929, 4961, 4993, 5025, 5057, 5090, 5122, 5154, 5187, \
	5219, 5252, 5285, 5317, 5350, 5383, 5416, 5449, 5482, 5515, 5549, \
	5582, 5615, 5649, 5682, 5716, 5749, 5783, 5817, 5851, 5884, 5918, \
	5952, 5987, 6021, 6055, 6089, 6123, 6158, 6192, 6227, 6261, 6296, \
	6331, 6366, 6400, 6435, 6470, 6505, 6540, 6576, 6611, 6646, 6681, \
	6717, 6752, 6788, 6824, 6859, 6895, 6931, 6967, 7002, 7038, 7074, \
	7111, 7147, 7183, 7219, 7256, 7292, 7328, 7365, 7401, 7438, 7475, \
	7512, 7548, 7585, 7622, 7659, 7696, 7733, 7771, 7808, 7845, 7882, \
	7920, 7957, 7995, 8032, 8070, 8108, 8146, 8183, 8221, 8259, 8297, \
	8335, 8373, 8412, 8450, 8488, 8526, 8565, 8603, 8642, 8680, 8719, \
	8758, 8797, 8835, 8874, 8913, 8952, 8991, 9030, 9069, 9109, 9148, \
	9187, 9227, 9266, 9305, 9345, 9385, 9424, 9464, 9504, 9544, 9583, \
	9623, 9663, 9703, 9743, 9784, 9824, 9864, 9904, 9945, 9985, 10026, \
	10066, 10107, 10147, 10188, 10229, 10270, 10311, 10351, 10392, 10433, \
	10475, 10516, 10557, 10598, 10639, 10681, 10722, 10764, 10805, 10847, \
	10888, 10930, 10972, 11013, 11055, 11097, 11139, 11181, 11223, 11265, \
	11307, 11349, 11392, 11434, 11476, 11519, 11561, 11604, 11646, 11689, \
	11732, 11774, 11817, 11860, 11903, 11946, 11989, 12032, 12075, 12118, \
	12161, 12204, 12247, 12291, 12334, 12378, 12421, 12465, 12508, 12552, \
	12595, 12639, 12683, 12727, 12771, 12815, 12859, 12903, 12947, 12991, \
	13035, 13079, 13124, 13168, 13212, 13257, 13301, 13346, 13390, 13435, \
	13480, 13524, 13569, 13614, 13659, 13704, 13749, 13794, 13839, 13884, \
	13929, 13974, 14020, 14065, 14110, 14156, 14201, 14247, 14292, 14338, \
	14384, 14429, 14475, 14521, 14567, 14613, 14659, 14705, 14751, 14797, \
	14843, 14889, 14935, 14982, 15028, 15074, 15121, 15167, 15214, 15260, \
	15307, 15354, 15400, 15447, 15494, 15541, 15588, 15635, 15682, 15729, \
	15776, 15823, 15870, 15917, 15965, 16012, 16059, 16107, 16154, 16202, \
	16249, 16297, 16345, 16392, 16440, 16488, 16536, 16584, 16631, 16679, \
	16727, 16776, 16824, 16872, 16920, 16968, 17017, 17065, 17113, 17162, \
	17210, 17259, 17307, 17356, 17405, 17453, 17502, 17551, 17600, 17649, \
	17697, 17746, 17795, 17845, 17894, 17943, 17992, 18041, 18091, 18140, \
	18189, 18239, 18288, 18338, 18387, 18437, 18487, 18536, 18586, 18636, \
	18686, 18735, 18785, 18835, 18885, 18935, 18985, 19036, 19086, 19136, \
	19186, 19237, 19287, 19337, 19388, 19438, 19489, 19539, 19590, 19641, \
	19691, 19742, 19793, 19844, 19895, 19946, 19997, 20048, 20099, 20150, \
	20201, 20252, 20303, 20355, 20406, 20457, 20509, 20560, 20612, 20663, \
	20715, 20766, 20818, 20870, 20921, 20973, 21025, 21077, 21129, 21181, \
	21233, 21285, 21337, 21389, 21441, 21493, 21546, 21598, 21650, 21703, \
	21755, 21808, 21860, 21913, 21965, 22018, 22070, 22123, 22176, 22229, \
	22282, 22334, 22387, 22440, 22493, 22546, 22599, 22653, 22706, 22759, \
	22812, 22866, 22919, 22972, 23026, 23079, 23133, 23186, 23240, 23293, \
	23347, 23401, 23455, 23508, 23562, 23616, 23670, 23724, 23778, 23832, \
	23886, 23940, 23994, 24049, 24103, 24157, 24211, 24266, 24320, 24375, \
	24429, 24484, 24538, 24593, 24648, 24702, 24757, 24812, 24867, 24921, \
	24976, 25031, 25086, 25141, 25196, 25251, 25307, 25362, 25417, 25472, \
	25527, 25583, 25638, 25694, 25749, 25805, 25860, 25916, 25971, 26027, \
	26083, 26138, 26194, 26250, 26306, 26362, 26418, 26474, 26530, 26586, \
	26642, 26698, 26754, 26810, 26866, 26923, 26979, 27035, 27092, 27148, \
	27205, 27261, 27318, 27374, 27431, 27488, 27544, 27601, 27658, 27715, \
	27772, 27829, 27886, 27943, 28000, 28057, 28114, 28171, 28228, 28285, \
	28343, 28400, 28457, 28515, 28572, 28629, 28687, 28744, 28802, 28860, \
	28917, 28975, 29033, 29090, 29148, 29206, 29264, 29322, 29380, 29438, \
	29496, 29554, 29612, 29670, 29728, 29786, 29845, 29903, 29961, 30020, \
	30078, 30137, 30195, 30254, 30312, 30371, 30429, 30488, 30547, 30605, \
	30664, 30723, 30782, 30841, 30900, 30959, 31018, 31077, 31136, 31195, \
	31254, 31313, 31373, 31432, 31491, 31550, 31610, 31669, 31729, 31788, \
	31848, 31907, 31967, 32027, 32086, 32146, 32206, 32265, 32325, 32385, \
	32445, 32505, 32565, 32625, 32685, 32745, 32805, 32865, 32926, 32986, \
	33046, 33106, 33167, 33227, 33287, 33348, 33408, 33469, 33529, 33590, \
	33651, 33711, 33772, 33833, 33894, 33954, 34015, 34076, 34137, 34198, \
	34259, 34320, 34381, 34442, 34503, 34565, 34626, 34687, 34748, 34810, \
	34871, 34932, 34994, 35055, 35117, 35178, 35240, 35301, 35363, 35425, \
	35487, 35548, 35610, 35672, 35734, 35796, 35858, 35920, 35982, 36044, \
	36106, 36168, 36230, 36292, 36354, 36417, 36479, 36541, 36604, 36666, \
	36728, 36791, 36853, 36916, 36978, 37041, 37104, 37166, 37229, 37292, \
	37355, 37417, 37480, 37543, 37606, 37669, 37732, 37795, 37858, 37921, \
	37984, 38047, 38111, 38174, 38237, 38301, 38364, 38427, 38491, 38554, \
	38618, 38681, 38745, 38808, 38872, 38936, 38999, 39063, 39127, 39190, \
	39254, 39318, 39382, 39446, 39510, 39574, 39638, 39702, 39766, 39830, \
	39894, 39959, 40023, 40087, 40152, 40216, 40280, 40345, 40409, 40474, \
	40538, 40603, 40667, 40732, 40797, 40861, 40926, 40991, 41055, 41120, \
	41185, 41250, 41315, 41380, 41445, 41510, 41575, 41640, 41705, 41770, \
	41836, 41901, 41966, 42031, 42097, 42162, 42228, 42293, 42358, 42424, \
	42489, 42555, 42621, 42686, 42752, 42818, 42883, 42949, 43015, 43081, \
	43147, 43213, 43279, 43345, 43411, 43477, 43543, 43609, 43675, 43741, \
	43807, 43874, 43940, 44006, 44072, 44139, 44205, 44272, 44338, 44405, \
	44471, 44538, 44604, 44671, 44738, 44804, 44871, 44938, 45005, 45072, \
	45138, 45205, 45272, 45339, 45406, 45473, 45540, 45607, 45675, 45742, \
	45809, 45876 };

//Maps 0x3FF points of ADC result to (0xFFFF - 63 [reserved for MIN_INTERBAL]) points of TIMER1,
//increasing resolution near 0 at the expense of the resolution near 0xFFFF
PROGMEM_LATE const uint16_t mapping_table[] = {
	0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, \
	5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 9, 9, 9, 9, 10, 10, 10, 10, \
	11, 11, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, \
	15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, \
	19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 23, 23, 23, \
	23, 24, 24, 24, 24, 25, 25, 25, 25, 26, 26, 26, 26, 27, 27, 27, 27, \
	28, 28, 28, 28, 29, 29, 29, 29, 30, 30, 30, 30, 31, 31, 31, 31, 32, \
	32, 32, 32, 33, 33, 33, 33, 34, 34, 34, 34, 35, 35, 35, 35, 36, 36, \
	36, 36, 37, 37, 37, 37, 38, 38, 38, 38, 39, 39, 39, 39, 40, 40, 40, \
	40, 41, 41, 41, 41, 42, 42, 42, 42, 43, 43, 43, 43, 44, 44, 44, 44, \
	45, 45, 45, 45, 46, 46, 46, 46, 47, 47, 47, 47, 48, 48, 48, 48, 49, \
	49, 49, 49, 50, 50, 50, 50, 51, 51, 51, 51, 52, 52, 52, 52, 53, 53, \
	53, 53, 54, 54, 54, 54, 55, 55, 55, 55, 56, 56, 56, 56, 57, 57, 57, \
	57, 58, 58, 58, 58, 59, 59, 59, 59, 60, 60, 60, 60, 61, 61, 61, 61, \
	62, 62, 62, 62, 63, 63, 63, 63, 64, 64, 64, 64, 65, 65, 65, 65, 66, \
	66, 66, 66, 67, 67, 67, 67, 68, 68, 68, 68, 69, 69, 69, 69, 70, 70, \
	70, 70, 71, 71, 71, 71, 72, 72, 72, 72, 73, 73, 73, 73, 74, 74, 74, \
	74, 75, 75, 75, 75, 76, 76, 76, 76, 77, 77, 77, 77, 78, 78, 78, 78, \
	79, 79, 79, 79, 80, 80, 80, 80, 81, 81, 81, 81, 82, 82, 82, 82, 83, \
	83, 83, 83, 84, 84, 84, 84, 85, 85, 85, 85, 86, 86, 86, 86, 87, 87, \
	87, 87, 88, 88, 88, 88, 89, 89, 89, 89, 90, 90, 90, 90, 91, 91, 91, \
	91, 92, 92, 92, 92, 93, 93, 93, 93, 94, 94, 94, 94, 95, 95, 95, 95, \
	96, 96, 96, 96, 97, 97, 97, 97, 98, 98, 98, 98, 99, 99, 99, 99, 100, \
	100, 100, 100, 101, 101, 101, 101, 102, 102, 102, 102, 103, 103, 103, \
	103, 104, 104, 104, 104, 105, 105, 105, 105, 106, 106, 106, 106, 107, \
	107, 107, 107, 108, 108, 108, 108, 109, 109, 109, 109, 110, 110, 110, \
	110, 111, 111, 111, 111, 112, 112, 112, 112, 113, 113, 113, 113, 114, \
	114, 114, 114, 115, 115, 115, 115, 116, 116, 116, 116, 117, 117, 117, \
	117, 118, 118, 118, 118, 119, 119, 119, 119, 120, 120, 120, 120, 121, \
	121, 121, 121, 122, 122, 122, 122, 123, 123, 123, 123, 124, 124, 124, \
	124, 125, 125, 125, 125, 126, 126, 126, 126, 127, 127, 127, 127, 128, \
	128, 128, 128, 129, 129, 129, 129, 130, 130, 130, 130, 131, 131, 131, \
	131, 132, 132, 132, 132, 133, 133, 133, 133, 134, 134, 134, 134, 135, \
	135, 135, 135, 136, 136, 136, 136, 137, 137, 137, 137, 138, 138, 138, \
	138, 139, 139, 139, 139, 140, 140, 140, 140, 141, 141, 141, 141, 142, \
	142, 142, 142, 143, 143, 143, 143, 144, 144, 144, 144, 145, 145, 145, \
	145, 146, 146, 146, 146, 147, 147, 147, 147, 148, 148, 148, 148, 149, \
	149, 149, 149, 150, 150, 150, 150, 151, 151, 151, 151, 152, 152, 152, \
	152, 153, 153, 153, 153, 154, 154, 154, 154, 155, 155, 155, 155, 156, \
	156, 156, 156, 157, 157, 157, 157, 158, 158, 158, 158, 159, 159, 159, \
	159, 160, 160, 160, 160, 161, 161, 161, 161, 162, 162, 162, 162, 163, \
	163, 163, 163, 164, 164, 164, 164, 165, 165, 165, 165, 166, 166, 166, \
	166, 167, 167, 167, 167, 168, 168, 168, 168, 169, 169, 169, 169, 170, \
	170, 170, 170, 170, 170, 170, 171, 171, 171, 172, 173, 174, 175, 176, \
	177, 179, 181, 183, 186, 188, 191, 194, 198, 202, 206, 211, 215, 221, \
	226, 232, 239, 245, 253, 260, 268, 277, 286, 295, 305, 316, 327, 338, \
	350, 363, 376, 389, 403, 418, 433, 449, 466, 483, 500, 519, 538, 557, \
	578, 599, 620, 643, 666, 689, 714, 739, 765, 792, 819, 847, 876, 906, \
	936, 967, 1000, 1033, 1066, 1101, 1136, 1173, 1210, 1248, 1287, 1326, \
	1367, 1409, 1451, 1494, 1539, 1584, 1630, 1677, 1726, 1775, 1825, \
	1876, 1928, 1981, 2035, 2090, 2146, 2204, 2262, 2321, 2382, 2443, \
	2506, 2569, 2634, 2700, 2767, 2835, 2904, 2974, 3046, 3119, 3192, \
	3267, 3344, 3421, 3500, 3579, 3660, 3743, 3826, 3911, 3997, 4084, \
	4172, 4262, 4353, 4445, 4539, 4634, 4730, 4827, 4926, 5026, 5128, \
	5231, 5335, 5441, 5548, 5656, 5766, 5877, 5989, 6103, 6219, 6335, \
	6453, 6573, 6694, 6817, 6941, 7066, 7193, 7322, 7452, 7583, 7716, \
	7851, 7987, 8124, 8263, 8404, 8546, 8690, 8835, 8982, 9131, 9281, \
	9432, 9586, 9740, 9897, 10055, 10215, 10376, 10539, 10704, 10871, \
	11039, 11209, 11380, 11553, 11728, 11905, 12083, 12263, 12445, 12628, \
	12813, 13000, 13189, 13380, 13572, 13766, 13962, 14160, 14359, 14560, \
	14764, 14969, 15175, 15384, 15594, 15807, 16021, 16237, 16455, 16675, \
	16896, 17120, 17346, 17573, 17802, 18034, 18267, 18502, 18739, 18978, \
	19219, 19462, 19707, 19954, 20203, 20454, 20707, 20962, 21219, 21478, \
	21739, 22002, 22267, 22534, 22803, 23075, 23348, 23624, 23901, 24181, \
	24462, 24746, 25032, 25320, 25611, 25903, 26197, 26494, 26793, 27094, \
	27397, 27702, 28010, 28319, 28631, 28945, 29262, 29580, 29901, 30224, \
	30549, 30877, 31206, 31538, 31873, 32209, 32548, 32889, 33232, 33578, \
	33926, 34276, 34629, 34984, 35341, 35701, 36063, 36427, 36794, 37163, \
	37534, 37908, 38284, 38663, 39043, 39427, 39813, 40201, 40591, 40985, \
	41380, 41778, 42178, 42581, 42987, 43394, 43805, 44218, 44633, 45051, \
	45471, 45894, 46319, 46747, 47177, 47610, 48045, 48483, 48924, 49367, \
	49813, 50261, 50712, 51165, 51621, 52080, 52541, 53005, 53472, 53941, \
	54413, 54887, 55364, 55844, 56326, 56811, 57299, 57789, 58282, 58778, \
	59277, 59778, 60282, 60788, 61298, 61810, 62325, 62842, 63363, 63886, \
	64411, 64940, 65471 };

static_assert(arraySize(acceleration_table) >= 1024, "Table too short!");
static_assert(arraySize(mapping_table) >= 1024, "Table too short!");
static_assert((arraySize(deceleration_table_high) + arraySize(deceleration_table_low)) >= (1024 - 16), "Table too short!");
static_assert((arraySize(precise_deceleration_table_low) + arraySize(precise_deceleration_table_high)) >= 1024, "Table too short!");